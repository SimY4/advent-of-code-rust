use std::iter::successors;

pub fn solve(input: &str) -> f64 {
    input
        .lines()
        .map(|line| line.parse::<i32>().unwrap())
        .map(|d| (d as f64 / 3.0).floor() - 2.0)
        .sum()
}

pub fn solve2(input: &str) -> f64 {
    input
        .lines()
        .map(|line| line.parse::<i32>().unwrap())
        .map(|d| {
            successors(Some(d as f64), |d| Some((d / 3.0).floor() - 2.0))
                .skip(1)
                .take_while(|d| *d >= 0.0)
                .sum::<f64>()
        })
        .sum()
}

pub const INPUT: &str = "125050\n\
                         115884\n\
                         132344\n\
                         67441\n\
                         119823\n\
                         86204\n\
                         111093\n\
                         99489\n\
                         67860\n\
                         51288\n\
                         62815\n\
                         65263\n\
                         56540\n\
                         81380\n\
                         96101\n\
                         116351\n\
                         56330\n\
                         123123\n\
                         133969\n\
                         115050\n\
                         137851\n\
                         136900\n\
                         71254\n\
                         53458\n\
                         139976\n\
                         140218\n\
                         117085\n\
                         52241\n\
                         71251\n\
                         136110\n\
                         103784\n\
                         132893\n\
                         140216\n\
                         85568\n\
                         94327\n\
                         85200\n\
                         136753\n\
                         110917\n\
                         147197\n\
                         120161\n\
                         81684\n\
                         56987\n\
                         143452\n\
                         94728\n\
                         138355\n\
                         54577\n\
                         59898\n\
                         69123\n\
                         133769\n\
                         118418\n\
                         93530\n\
                         50297\n\
                         71543\n\
                         113383\n\
                         135203\n\
                         140129\n\
                         70977\n\
                         58566\n\
                         129593\n\
                         137456\n\
                         130100\n\
                         130915\n\
                         88872\n\
                         96014\n\
                         62746\n\
                         127048\n\
                         89522\n\
                         62021\n\
                         85363\n\
                         143611\n\
                         135995\n\
                         65836\n\
                         146022\n\
                         119911\n\
                         127381\n\
                         121007\n\
                         71577\n\
                         129637\n\
                         90271\n\
                         54640\n\
                         117213\n\
                         116151\n\
                         114022\n\
                         107683\n\
                         102079\n\
                         94388\n\
                         135676\n\
                         69019\n\
                         104056\n\
                         124799\n\
                         107998\n\
                         148696\n\
                         122793\n\
                         135417\n\
                         52981\n\
                         122890\n\
                         142491\n\
                         88137\n\
                         57609\n\
                         54921";
